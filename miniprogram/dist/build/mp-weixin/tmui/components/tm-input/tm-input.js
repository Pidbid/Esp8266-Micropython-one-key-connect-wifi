"use strict";var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,u=(r,t,a)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,l=(e,r)=>{for(var t in r||(r={}))o.call(r,t)&&u(e,t,r[t]);if(a)for(var t of a(r))n.call(r,t)&&u(e,t,r[t]);return e},f=(e,a)=>r(e,t(a)),i=require("../../../common/vendor.js"),p=require("../../tool/lib/minxs.js"),d=require("../../tool/lib/tmpinia.js");require("../../tool/theme/theme.js"),require("../../tool/theme/colortool.js"),require("../../tool/lib/interface.js"),require("../../../theme/index.js"),require("../../tool/function/util.js"),require("../../tool/function/preview.js"),Math||(c+m+h+s)();const s=()=>"../tm-sheet/tm-sheet.js",c=()=>"../tm-icon/tm-icon.js",m=()=>"../tm-text/tm-text.js",h=()=>"../tm-button/tm-button.js",b=i.defineComponent({props:f(l({},p.custom_props),{color:{type:String,default:"grey-4"},focusColor:{type:String,default:"primary"},fontColor:{type:String,default:""},text:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1},border:{type:Number,default:0},transprent:{type:Boolean,default:!1},round:{type:Number,default:3},margin:{type:Array,default:()=>[0,0]},padding:{type:Array,default:()=>[0,0]},height:{type:Number,default:64},prefix:{type:String,default:""},prefixLabel:{type:String,default:""},suffix:{type:String,default:""},suffixLabel:{type:String,default:""},fontSize:{type:Number,default:30},search:{type:String,default:""},searchLabel:{type:String,default:""},showClear:{type:Boolean,default:!1},password:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入内容"},errorLabel:{type:String,default:"请输入内容"},align:{type:String,default:"left"},modelValue:{type:[String,Number],default:""},inputPadding:{type:Array,default:()=>[24,0]},showCharNumber:{type:Boolean,default:!1},maxlength:{type:Number,default:-1},type:{type:String,default:"text"},cursorSpacing:{type:Number,default:24},confirmType:{type:String,default:"done"},confirmHold:{type:Boolean,default:!1},autoBlur:{type:Boolean,default:!0},holdKeyboard:{type:Boolean,default:!1},adjustPosition:{type:Boolean,default:!0}}),emits:["focus","blur","confirm","input","update:modelValue","clear","search","keyboardheightchange","click"],setup(e,{emit:r}){var t;const a=e,o=d.useTmpiniaStore(),{proxy:n}=i.getCurrentInstance();let u=n.$parent;for(;u&&"tmFormComnameFormItem"!=(null==u?void 0:u.tmFormComnameFormItem)&&u;)u=null!=(t=null==u?void 0:u.$parent)?t:void 0;const s=i.ref(!1);s.value="android"==i.index.getSystemInfoSync().platform;const c=i.computed$1((()=>a.height)),m=i.computed$1((()=>""!==a.search||""!==a.searchLabel?[4,0]:a.inputPadding)),h=i.computed$1((()=>({prefix:a.prefix,prefixLabel:a.prefixLabel,fontSize:a.fontSize,fontSize_px:i.index.upx2px(a.fontSize),suffix:a.suffix,suffixLabel:a.suffixLabel,fontColor:a.fontColor,search:a.search,searchLabel:a.searchLabel,showClear:a.showClear,password:a.password,disabled:a.disabled,placeholder:a.placeholder,showCharNumber:a.showCharNumber,maxlength:a.maxlength,cursorSpacing:a.cursorSpacing,confirmType:a.confirmType,confirmHold:a.confirmHold,autoBlur:a.autoBlur,holdKeyboard:a.holdKeyboard,adjustPosition:a.adjustPosition,type:a.type}))),b=i.computed$1((()=>o.tmStore));i.computed$1((()=>p.computedStyle(a))),i.computed$1((()=>p.computedClass(a)));const x=i.computed$1((()=>p.computedDark(a,b.value))),y=i.ref(!1),g=i.ref(!1),v=i.computed$1((()=>{let e=a.color;return g.value&&(e=a.focusColor),y.value&&(e="red"),e})),S=i.computed$1((()=>{const e=f(l({},a),{color:v.value});return p.computedTheme(e,x.value)})),C=i.ref(h.value.password),w=i.computed$1((()=>a.password)),z=i.ref(a.errorLabel),j=i.ref(a.modelValue),$=i.computed$1((()=>String(j.value).split("").length));i.watch((()=>a.modelValue),(()=>j.value=a.modelValue));const L=i.inject("tmFormItemRules",i.computed$1((()=>{var e;return{message:null!=(e=null==a?void 0:a.errorLabel)?e:"请填写必要的内容",required:!1,validator:!1}})));function B(){r("search",j.value)}function k(){j.value="",r("update:modelValue",""),r("clear")}function N(){C.value=!C.value}function P(){g.value=!0,r("focus")}function q(){g.value=!1,_(),r("blur")}function O(){r("confirm",j.value)}function T(e){return j.value=e.detail.value,r("input",e.detail.value),r("update:modelValue",e.detail.value),e.detail.value}const V=i.inject("tmFormFun",i.computed$1((()=>"")));async function _(e=!0){var r;if(u){let t=!1;e&&!0===(null==(r=L.value)?void 0:r.required)&&("function"==typeof L.value.validator?t=await!L.value.validator(j.value):"boolean"==typeof L.value.validator&&(t=L.value.validator),"function"!=typeof L.value.validator&&(t=0==String(j.value).length),y.value=t),z.value=String(L.value.message),u.pushCom({value:j.value,isRequiredError:t,componentsName:"tm-input",message:L.value.message})}}return i.watch(V,(()=>{"validate"==V.value&&_(),"reset"==V.value&&(j.value="",y.value=!1,r("update:modelValue",j.value),_(!1)),"clearValidate"==V.value&&(y.value=!1,_(!1))})),_(!1),(e,t)=>i.e({a:i.unref(h).search||i.unref(h).searchLabel},(i.unref(h).search||i.unref(h).searchLabel,{}),{b:i.unref(h).prefix},i.unref(h).prefix?{c:i.p({"font-size":i.unref(h).fontSize,name:i.unref(h).prefix})}:{},{d:i.unref(h).prefixLabel},i.unref(h).prefixLabel?{e:i.p({"font-size":i.unref(h).fontSize,label:i.unref(h).prefixLabel})}:{},{f:!s.value},s.value?{}:i.e({g:"textarea"!=i.unref(h).type},"textarea"!=i.unref(h).type?{h:j.value,i:i.o(P),j:i.o(q),k:i.o(O),l:i.o(T),m:i.o((e=>r("keyboardheightchange"))),n:C.value,o:i.unref(h).maxlength,p:i.unref(h).disabled,q:i.unref(h).cursorSpacing,r:i.unref(h).confirmType,s:i.unref(h).confirmHold,t:i.unref(h).autoBlur,v:i.unref(h).holdKeyboard,w:i.unref(h).adjustPosition,x:i.unref(h).type,y:i.unref(h).placeholder,z:i.s({height:`${i.unref(c)}rpx`,color:i.unref(h).fontColor?i.unref(h).fontColor:i.unref(S).textColor,"text-align":a.align,fontSize:`${i.unref(h).fontSize_px}px`}),A:`fontSize:${i.unref(h).fontSize_px}px`}:{},{B:"textarea"==i.unref(h).type},"textarea"==i.unref(h).type?{C:j.value,D:i.o(P),E:i.o(q),F:i.o(O),G:i.o(T),H:i.o((e=>r("keyboardheightchange"))),I:i.unref(h).maxlength,J:C.value,K:i.unref(h).disabled,L:i.unref(h).placeholder,M:i.unref(h).cursorSpacing,N:i.unref(h).confirmType,O:i.unref(h).confirmHold,P:i.unref(h).autoBlur,Q:i.unref(h).holdKeyboard,R:i.unref(h).adjustPosition,S:i.unref(h).type,T:i.s({height:`${i.unref(c)}rpx`,width:"auto","word-break":"break-word",color:i.unref(h).fontColor?i.unref(h).fontColor:i.unref(S).textColor,"text-align":a.align,fontSize:`${i.unref(h).fontSize_px}px`}),U:{fontSize:`${i.unref(h).fontSize_px}px`}}:{},{V:i.o((e=>r("click",e))),W:i.s({width:"0px"})}),{X:s.value},s.value?i.e({Y:"textarea"!=i.unref(h).type},"textarea"!=i.unref(h).type?{Z:i.o((e=>r("click",e))),aa:j.value,ab:i.o(P),ac:i.o(q),ad:i.o(O),ae:i.o(T),af:i.o((e=>r("keyboardheightchange"))),ag:C.value,ah:i.unref(h).disabled,ai:i.unref(h).cursorSpacing,aj:i.unref(h).confirmType,ak:i.unref(h).confirmHold,al:i.unref(h).autoBlur,am:i.unref(h).holdKeyboard,an:i.unref(h).adjustPosition,ao:i.unref(h).maxlength,ap:i.unref(h).type,aq:i.unref(h).placeholder,ar:i.s({height:`${i.unref(c)}rpx`,color:i.unref(h).fontColor?i.unref(h).fontColor:i.unref(S).textColor,"text-align":a.align,fontSize:`${i.unref(h).fontSize_px}px`}),as:`fontSize:${i.unref(h).fontSize_px}px`}:{},{at:"textarea"==i.unref(h).type},"textarea"==i.unref(h).type?{av:i.o((e=>r("click",e))),aw:j.value,ax:i.o(P),ay:i.o(q),az:i.o(O),aA:i.o(T),aB:i.o((e=>r("keyboardheightchange"))),aC:C.value,aD:i.unref(h).disabled,aE:i.unref(h).placeholder,aF:i.unref(h).cursorSpacing,aG:i.unref(h).confirmType,aH:i.unref(h).confirmHold,aI:i.unref(h).autoBlur,aJ:i.unref(h).holdKeyboard,aK:i.unref(h).adjustPosition,aL:i.unref(h).maxlength,aM:i.unref(h).type,aN:i.s({height:`${i.unref(c)}rpx`,width:"auto","word-break":"break-word",color:i.unref(h).fontColor?i.unref(h).fontColor:i.unref(S).textColor,"text-align":a.align,fontSize:`${i.unref(h).fontSize_px}px`}),aO:{fontSize:`${i.unref(h).fontSize_px}px`}}:{},{aP:i.s({width:"0px"})}):{},{aQ:i.unref(h).showClear&&i.unref($)>0},i.unref(h).showClear&&i.unref($)>0?{aR:i.o(k),aS:i.p({"font-size":.9*i.unref(h).fontSize,name:"tmicon-times-circle-fill"})}:{},{aT:y.value},y.value?{aU:i.p({"font-size":i.unref(h).fontSize,name:"tmicon-exclamation-circle"})}:{},{aV:i.unref(h).suffix},i.unref(h).suffix?{aW:i.p({"font-size":.85*i.unref(h).fontSize,name:i.unref(h).suffix})}:{},{aX:i.unref(h).suffixLabel},i.unref(h).suffixLabel?{aY:i.p({"font-size":i.unref(h).fontSize,label:i.unref(h).suffixLabel})}:{},{aZ:i.unref(w)},i.unref(w)?{ba:i.o(N),bb:i.p({"font-size":i.unref(h).fontSize,name:C.value?"tmicon-eyeslash-fill":"tmicon-eye-fill"})}:{},{bc:i.unref(h).showCharNumber&&i.unref($)>0&&"textarea"!=i.unref(h).type},i.unref(h).showCharNumber&&i.unref($)>0&&"textarea"!=i.unref(h).type?i.e({bd:i.p({label:i.unref($)}),be:i.unref(h).maxlength>0},i.unref(h).maxlength>0?{bf:i.p({label:"/"+i.unref(h).maxlength})}:{}):{},{bg:i.unref(h).showCharNumber&&i.unref($)>0&&"textarea"==i.unref(h).type},i.unref(h).showCharNumber&&i.unref($)>0&&"textarea"==i.unref(h).type?i.e({bh:i.p({label:i.unref($)}),bi:i.unref(h).maxlength>0},i.unref(h).maxlength>0?{bj:i.p({label:"/"+i.unref(h).maxlength})}:{}):{},{bk:i.unref(h).search||i.unref(h).searchLabel},i.unref(h).search||i.unref(h).searchLabel?{bl:i.o(B),bm:i.p({color:a.focusColor,"font-size":24,height:i.unref(c)-11,padding:[16,0],block:!0,margin:[0,0],icon:i.unref(h).search,label:i.unref(h).searchLabel})}:{},{bn:i.n("textarea"==i.unref(h).type?"flex-row-top-center":"flex-row-center-center"),bo:i.s({height:`${i.unref(c)}rpx`}),bp:i.p({transprent:a.transprent,round:a.round,"no-level":!0,margin:[0,0],padding:i.unref(m),border:a.border,text:a.text,color:i.unref(v),outlined:a.outlined}),bq:i.p({transprent:!0,margin:a.margin,padding:a.padding})})}});wx.createComponent(b);
