"use strict";var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,o)=>{for(var i in o||(o={}))a.call(o,i)&&r(e,i,o[i]);if(t)for(var i of t(o))l.call(o,i)&&r(e,i,o[i]);return e},i=require("../../../common/vendor.js");Math||u();const u=()=>"../tm-sheet/tm-sheet.js",n=i.defineComponent({props:{modelValue:{type:Object,default:()=>({}),required:!0},margin:{type:Array,default:()=>[32,24]},padding:{type:Array,default:()=>[16,0]},layout:{type:String,default:"horizontal"},labelWidth:{type:Number,default:160},labelAlign:{type:String,default:"left"},border:{type:Boolean,default:!0}},emits:["submit","reset","validate","clearValidate","update:modelValue"],setup(e,{expose:t,emit:a}){const l=e,r=i.ref({});i.watchEffect((()=>r.value=l.modelValue));const u=o({},l.modelValue),n=i.ref([]),d=i.ref(["tm-radio-group","tm-checkbox-box","tm-input","tm-rate","tm-slider","tm-segtab","tm-switch","tm-upload"]),m=i.ref("");return i.provide("tmFormFun",i.computed$1((()=>m.value))),i.provide("tmFormLabelWidth",i.computed$1((()=>l.labelWidth))),i.provide("tmFormLabelAlign",i.computed$1((()=>l.labelAlign))),i.provide("tmFormLayout",i.computed$1((()=>l.layout))),i.provide("tmFormBorder",i.computed$1((()=>l.border))),t({reset:function(){m.value="",i.nextTick((()=>{m.value="reset",i.nextTick((()=>{a("reset"),a("update:modelValue",o({},u))}))}))},validate:function(){m.value="",i.nextTick((()=>{m.value="validate",i.nextTick((()=>{a("reset")}))}))},clearValidate:function(){m.value="",i.nextTick((()=>{m.value="clearValidate",i.nextTick((()=>{a("clearValidate")}))}))},submit:function(){m.value="",i.nextTick((()=>{m.value="validate",i.nextTick((()=>{let e=!0;for(let a=0,l=n.value.length;a<l;a++)if(1==n.value[a].isRequiredError){e=!1;break}let t=o({},r.value);n.value.forEach((e=>{!function(e,t="",a){if(""==t)return e;var l=t.split(".");for(;l.length>1;){let t=String(l.shift());e=i.isProxy(e[t])?i.toRaw(e[t]):e[t]}e[l[0]]=i.isProxy(a)?i.toRaw(a):a}(t,e.field,e.value)})),console.log({data:t,validate:e}),a("submit",{data:t,validate:e})}))}))},pushKey:function(e){if(""==e.componentsName&&!d.value.includes(e.componentsName))return;let t=n.value.findIndex((t=>t.id==e.id));-1==t?n.value.push(e):n.value[t]=e},delKey:function(e){let t=n.value.findIndex((t=>t.id==e.id));t>-1&&n.value.splice(t,1)},tmFormComnameId:"tmFormId"}),(e,t)=>({a:i.p({round:3,_class:"flex flex-col overflow",padding:l.padding,margin:l.margin})})}});wx.createComponent(n);
